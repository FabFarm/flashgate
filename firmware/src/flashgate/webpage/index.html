<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FlashGate Controller</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 600px;
            margin: auto;
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        h1 {
            text-align: center;
        }

        .radio-group {
            margin-bottom: 20px;
        }

        .radio-group label {
            margin-right: 10px;
        }

        .custom-pattern {
            display: none;
        }

        .custom-pattern.active {
            display: block;
        }

        .morse-code {
            margin: 20px 0;
            padding: 10px;
            background: #eaeaea;
            border-radius: 4px;
        }

        .flash-buttons {
            text-align: center;
        }

        .flash-buttons button {
            margin: 0 5px;
            padding: 10px 20px;
            font-size: 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .flash-buttons button.long-flash {
            background-color: #4CAF50;
            color: white;
        }

        .flash-buttons button.short-flash {
            background-color: #2196F3;
            color: white;
        }

        .flash-buttons button.clear {
            background-color: #f44336;
            color: white;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>Arduino Gate Controller</h1>
        <div class="radio-group">
            <input type="radio" id="any-flashes" name="flash-type" value="any" checked>
            <label for="any-flashes">Any flashes</label>
            <input type="radio" id="custom-pattern" name="flash-type" value="custom">
            <label for="custom-pattern">Custom flash pattern</label>
        </div>
        <div class="custom-pattern">
            <p>Create your own pattern:</p>
            <div class="morse-code" id="morse-code-display"></div>
            <div class="flash-buttons">
                <button class="long-flash">Long Flash</button>
                <button class="short-flash">Short Flash</button>
                <button class="clear">Clear</button>
                <button class="upload-pattern">Upload Flash Pattern</button>
            </div>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var radios = document.getElementsByName('flash-type');
            var customPatternDiv = document.querySelector('.custom-pattern');
            var morseCodeDisplay = document.getElementById('morse-code-display');
            var longFlashButton = document.querySelector('.long-flash');
            var shortFlashButton = document.querySelector('.short-flash');
            var clearButton = document.querySelector('.clear');

            // Function to update the morse code display
            function updateMorseCodeDisplay(symbol) {
                morseCodeDisplay.textContent += symbol;
            }

            // Event listeners for the buttons
            longFlashButton.addEventListener('click', function () {
                updateMorseCodeDisplay('-'); // Dash for long flash
            });

            shortFlashButton.addEventListener('click', function () {
                updateMorseCodeDisplay('.'); // Dot for short flash
            });

            clearButton.addEventListener('click', function () {
                morseCodeDisplay.textContent = ''; // Clear the display
            });

            // Event listener for radio buttons to show/hide custom pattern div
            radios.forEach(function (radio) {
                radio.addEventListener('change', function () {
                    if (document.getElementById('custom-pattern').checked) {
                        customPatternDiv.classList.add('active');
                    } else {
                        customPatternDiv.classList.remove('active');
                    }
                });
            });
        });
        var uploadPatternButton = document.querySelector('.upload-pattern'); // New button reference

        // Function to upload the flash pattern
        function uploadFlashPattern() {
            var morseCodeDisplay = document.getElementById('morse-code-display');
            var pattern = morseCodeDisplay.textContent.split('').map(function (symbol) {
                return symbol === '-'; // True for long flash (dash), False for short flash (dot)
            });
            console.log(pattern); // For demonstration, replace with actual upload logic
        }

        // Event listener for the new button
        uploadPatternButton.addEventListener('click', uploadFlashPattern);
    </script>
</body>

</html>